<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <style>
        .subject-table {
            width: 100%;
            text-align: center;
            border: 2px solid black;
        }
    </style>
    <script>
        function updateTable() {
            var totalSubjects = document.getElementById("input-total-subjects").value;
            var table = document.getElementById("table-subject");

            for (let i = 0; i < parseInt(totalSubjects, 10); i++) {
                var newRow = document.createElement("tr");

                for (let j = 0; j < 3; j++) {
                    var newTd = document.createElement("td");
                    var newInput = document.createElement("input");

                    switch (j) {
                        case 0:
                            newInput.className = "subject";
                            newInput.value = "Math";
                            break;
                        case 1:
                            newInput.className = "score";
                            newInput.value = "S";
                            break;
                        case 2:
                            newInput.className = "credit";
                            newInput.value = 2;
                            break;
                    }
                    newInput.type = "text";
                    newTd.appendChild(newInput);
                    newRow.appendChild(newTd);
                }
                table.appendChild(newRow);
            }
        }

        function clacGPA() {
            var totalSubjects = parseInt(document.getElementById("input-total-subjects").value, 10);
            var totalCredits = 0;
            var totalGradePoints = 0;

            for (let i = 0; i < totalSubjects; i++) {
                var scoreInput = document.getElementsByClassName("score")[i];
                var creditInput = document.getElementsByClassName("credit")[i];

                var score = scoreInput.value;
                var credit = parseInt(creditInput.value, 10);

                // 成績を数値に対応させる例（この例ではA=4, B=3, C=2, D=1, F=0としています）
                var gradePoints = 0;
                switch (score) {
                    case "A": gradePoints = 4; break;
                    case "B": gradePoints = 3; break;
                    case "C": gradePoints = 2; break;
                    case "D": gradePoints = 1; break;
                    // Fや評価が数字の場合の対応はここに追加
                }

                totalGradePoints += gradePoints * credit;
                totalCredits += credit;
            }

            var gpa = totalGradePoints / totalCredits;

            // 結果を表示
            var gpaElement = document.getElementById("gpa");
            gpaElement.textContent = gpa.toFixed(2); // 小数点以下2桁まで表示
        }
    </script>
</head>

<body>
    <div class="top-title">
        <h2>GPA算出アプリ</h2>
    </div>
    <div>
        <div>
            <h3>設定</h3>
        </div>
        <div>
            <p>
                科目数：<input type="text" id="input-total-subjects" value="1"><br>
                <button onclick="updateTable()">UpdateTable</button>
            </p>
        </div>
    </div>
    <div class="contents">
        <table class="subject-table" id="table-subject"></table>
        <button onclick="clacGPA()">計算</button>
    </div>
    <div class="output">
        <p>
            GPA: <span id="gpa"></span>
        </p>
    </div>
</body>

</html>